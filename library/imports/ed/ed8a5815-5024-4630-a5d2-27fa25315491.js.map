{"version":3,"sources":["assets\\goap\\FireNpc.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uDAAsD;AACtD,0DAAyD;AACzD,qDAAgD;AAEhD,mEAA8D;AAC9D,+DAA8D;AAExD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C;IAAqC,2BAAS;IAA9C;QAAA,qEA6CC;QA5CG,WAAK,GAAuB,IAAI,GAAG,EAAiB,CAAA;;IA4CxD,CAAC;IA1CG,wBAAM,GAAN;QAAA,iBAeC;QAdG,IAAI,IAAI,GAAG,IAAI,sBAAY,EAAE,CAAA;QAC7B,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAA;QAG/B,IAAI,KAAK,GAAG,IAAI,6BAAmB,EAAE,CAAA;QACrC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAA;QAEhC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAA;QACvC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,0BAA0B,EAAE,KAAK,CAAC,CAAA;QACjD,IAAI,CAAC,IAAI,EAAE,CAAA;QACX,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAA;QAClC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACzB,KAAI,CAAC,UAAU,CAAC,0BAA0B,CAAC,CAAA;QAC/C,CAAC,CAAC,CAAC,KAAK,EAAE,CAAA;IACd,CAAC;IAEM,4BAAU,GAAjB,UAAkB,QAAQ;QACtB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;QACnC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAA;QAC7B,IAAI,IAAI,EAAE;YACN,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;YAClB,IAAI,CAAC,oBAAoB,EAAE,CAAA;YAC3B,IAAI,CAAC,eAAe,EAAE,CAAA;YACtB,IAAI,OAAO,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAA;YACxC,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;gBACjD,IAAM,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;gBAC/B,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAA;aAC1B;YACD,IAAI,CAAC,WAAW,CAAC,qBAAS,CAAC,SAAS,CAAC,CAAC;SACzC;IACL,CAAC;IAEM,iCAAe,GAAtB;QACI,IAAI,IAAI,GAAG,IAAI,GAAG,EAAkB,CAAC;QACrC,IAAI,CAAC,GAAG,CAAC,mCAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACzC,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,wBAAM,GAAN,UAAO,EAAE;QACL,iBAAM,MAAM,YAAC,EAAE,CAAC,CAAA;IACpB,CAAC;IA5CgB,OAAO;QAD3B,OAAO;OACa,OAAO,CA6C3B;IAAD,cAAC;CA7CD,AA6CC,CA7CoC,qBAAS,GA6C7C;kBA7CoB,OAAO","file":"","sourceRoot":"/","sourcesContent":["import { ActionDataStatus } from './ActionDataStatus';\r\nimport { GoapAgent } from '../src/app/ai/goap/GoapAgent';\r\nimport GoapOutFire2 from './goaps/GoapOutFire2';\r\nimport { IGoap } from '../src/app/ai/goap/IGoap';\r\nimport GoapOutFireExigence from './goaps/GoapOutFireExigence';\r\nimport { StateEnum } from '../src/app/ai/fsm/state/StateEnum';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n@ccclass\r\nexport default class FireNpc extends GoapAgent {\r\n    goaps: Map<string, IGoap> = new Map<string, IGoap>()\r\n\r\n    onLoad(): void {\r\n        let goap = new GoapOutFire2()\r\n        goap.initAvaliableActions(this)\r\n\r\n\r\n        let goap2 = new GoapOutFireExigence()\r\n        goap2.initAvaliableActions(this)\r\n\r\n        this.goaps.set(\"normal_out_fire\", goap)\r\n        this.goaps.set(\"normal_out_fire_exigence\", goap2)\r\n        this.init()\r\n        this.changeGoap(\"normal_out_fire\")\r\n        cc.tween(this).delay(1).call(() => {\r\n            this.changeGoap(\"normal_out_fire_exigence\")\r\n        }).start()\r\n    }\r\n\r\n    public changeGoap(goapName) {\r\n        let goap = this.goaps.get(goapName)\r\n        console.log(\"切换行动\", goapName)\r\n        if (goap) {\r\n            this.setGoap(goap)\r\n            this.cleanAvalableActions()\r\n            this.cleanCurActions()\r\n            let actions = goap.getAvaliableActions()\r\n            for (let index = 0; index < actions.length; index++) {\r\n                const element = actions[index];\r\n                this.addAction(element)\r\n            }\r\n            this.changeState(StateEnum.StateIdle);\r\n        }\r\n    }\r\n\r\n    public createGoalState(): Map<string, Object> {\r\n        let goal = new Map<string, Object>();\r\n        goal.set(ActionDataStatus.outFire, true);\r\n        return goal;\r\n    }\r\n\r\n    update(dt) {\r\n        super.update(dt)\r\n    }\r\n}\r\n"]}