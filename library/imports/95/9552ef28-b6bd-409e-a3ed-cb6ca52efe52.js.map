{"version":3,"sources":["assets/src/app/ai/fsm/state/StateMove.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAGA,yCAAwC;AACxC,yCAAwC;AAExC;IAA+B,6BAAS;IAAxC;;IAuBA,CAAC;IArBG;;;OAGG;IACI,4BAAQ,GAAf,UAAgB,KAAa;QACzB,IAAI,KAAK,GAAU,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QAEzC,uBAAuB;QAEvB,IAAI,MAAM,GAAe,IAAI,CAAC,KAAK,CAAC,kBAAkB,EAAE,CAAC;QACzD,IAAI,MAAM,CAAC,eAAe,EAAE,IAAI,MAAM,CAAC,MAAM,IAAI,IAAI,EAAE;YACnD,OAAO,CAAC,GAAG,CAAC,iJAAiJ,CAAC,CAAC;YAC/J,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAS,CAAC,SAAS,CAAC,CAAC;YAC5C,OAAO;SACV;QAED,+BAA+B;QAC/B,IAAI,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,EAAE;YAChC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAS,CAAC,kBAAkB,CAAC,CAAC;SACxD;IACL,CAAC;IACL,gBAAC;AAAD,CAvBA,AAuBC,CAvB8B,qBAAS,GAuBvC;AAvBY,8BAAS","file":"","sourceRoot":"/","sourcesContent":["import { GoapAction } from \"../../goap/GoapAction\";\nimport { GoapAgent } from \"../../goap/GoapAgent\";\nimport { IGoap } from \"../../goap/IGoap\";\nimport { StateBase } from \"./StateBase\";\nimport { StateEnum } from \"./StateEnum\";\n\nexport class StateMove extends StateBase {\n    protected _owner: GoapAgent\n    /**\n     * 状态更新 \n     * @return \n     */\n    public onUpdate(delta: number): void {\n        let iGoap: IGoap = this.owner.getOwner();\n\n        // move the game object\n\n        let action: GoapAction = this.owner.peekCurrentActions();\n        if (action.requiresInRange() && action.target == null) {\n            console.log(\"Fatal error: Action requires a target but has none. Planning failed. You did not assign the target in your Action.checkProceduralPrecondition()\");\n            this.owner.changeState(StateEnum.StateIdle);\n            return;\n        }\n\n        // get the agent to move itself\n        if (iGoap.moveAgent(action, delta)) {\n            this.owner.changeState(StateEnum.StatePerformAction);\n        }\n    }\n}"]}