{"version":3,"sources":["assets/src/app/ai/fsm/state/StateMove.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AACA,kDAAgD;AAEhD,yCAAuC;AACvC,yCAAuC;AAEvC;IAA+B,6BAAS;IAAxC;;IAqBA,CAAC;IApBU,2BAAO,GAAd,cAAkB,CAAC;IACnB;;;OAGG;IACI,4BAAQ,GAAf,UAAgB,KAAa;QACzB,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,qBAAS,CAAC,CAAA;QAClD,IAAI,IAAI,GAAU,SAAS,CAAC,OAAO,EAAE,CAAA;QACrC,IAAI,MAAM,GAAe,SAAS,CAAC,kBAAkB,EAAE,CAAA;QACvD,IAAI,MAAM,CAAC,eAAe,EAAE,IAAI,MAAM,CAAC,MAAM,IAAI,IAAI,EAAE;YACnD,OAAO,CAAC,GAAG,CAAC,iJAAiJ,CAAC,CAAA;YAC9J,SAAS,CAAC,WAAW,CAAC,qBAAS,CAAC,SAAS,CAAC,CAAA;YAC1C,OAAM;SACT;QAED,+BAA+B;QAC/B,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,EAAE;YAC/B,SAAS,CAAC,WAAW,CAAC,qBAAS,CAAC,kBAAkB,CAAC,CAAA;SACtD;IACL,CAAC;IACL,gBAAC;AAAD,CArBA,AAqBC,CArB8B,qBAAS,GAqBvC;AArBY,8BAAS","file":"","sourceRoot":"/","sourcesContent":["import { GoapAction } from \"../../goap/GoapAction\"\nimport { GoapAgent } from \"../../goap/GoapAgent\"\nimport { IGoap } from \"../../goap/IGoap\"\nimport { StateBase } from \"./StateBase\"\nimport { StateEnum } from \"./StateEnum\"\n\nexport class StateMove extends StateBase {\n    public onEnter() {}\n    /**\n     * 状态更新\n     * @return\n     */\n    public onUpdate(delta: number): void {\n        let goapAgent = this.owner.getComponent(GoapAgent)\n        let goap: IGoap = goapAgent.getGoap()\n        let action: GoapAction = goapAgent.peekCurrentActions()\n        if (action.requiresInRange() && action.target == null) {\n            console.log(\"Fatal error: Action requires a target but has none. Planning failed. You did not assign the target in your Action.checkProceduralPrecondition()\")\n            goapAgent.changeState(StateEnum.StateIdle)\n            return\n        }\n\n        // get the agent to move itself\n        if (goap.moveAgent(action, delta)) {\n            goapAgent.changeState(StateEnum.StatePerformAction)\n        }\n    }\n}\n"]}