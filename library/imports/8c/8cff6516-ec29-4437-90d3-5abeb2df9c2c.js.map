{"version":3,"sources":["assets\\src\\app\\view\\EnvironmentView.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mEAAkE;AAClE,6EAA4E;AAC5E,uDAAsD;AACtD,6DAA4D;AAC5D,mEAAkE;AAClE,+DAA8D;AAC9D,uDAAsD;AACtD,qDAAoD;AACpD,+DAA8D;AAC9D,uEAAsE;AACtE,2DAA0D;AACpD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C;IAAqC,mCAAY;IAAjD;QAAA,qEAwFC;QAtFO,qBAAe,GAAwB,IAAI,CAAC;QAE5C,qBAAe,GAAwB,IAAI,CAAC;QAG3C,mBAAa,GAAsB,IAAI,CAAA;QAEvC,mBAAa,GAAsB,IAAI,CAAA;QAEvC,mBAAa,GAAsB,IAAI,CAAA;QAGxC,eAAS,GAAkB,IAAI,CAAC;QAEhC,eAAS,GAAkB,IAAI,CAAC;QAEhC,eAAS,GAAkB,IAAI,CAAC;QAEhC,eAAS,GAAkB,IAAI,CAAC;QAGhC,uBAAiB,GAA2B,IAAI,CAAC;QAEjD,eAAS,GAAmB,IAAI,CAAC;QAGjC,gBAAU,GAAe,IAAI,CAAC;QAE9B,YAAM,GAAW,IAAI,CAAC;QAEtB,WAAK,GAAU,IAAI,CAAC;QAEpB,gBAAU,GAAe,IAAI,CAAC;QAErC,aAAO,GAAG,CAAC,CAAA;;IAoDZ,CAAC;IAnDA,+BAAK,GAAL;QACC,IAAI,CAAC,eAAe,EAAE,CAAC;IACxB,CAAC;IAEO,yCAAe,GAAvB;QACC,yBAAW,CAAC,eAAe,GAAG,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAC3E,yBAAW,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACrF,yBAAW,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAEzF,yBAAW,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC1C,yBAAW,CAAC,kBAAkB,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAG1D,aAAa;QACb,IAAI,OAAO,GAAG,IAAI,qCAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7C,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAErC,IAAI,QAAQ,GAAG,IAAI,qCAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAElC,IAAI,OAAO,GAAG,IAAI,qCAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7C,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAEhC,IAAI,YAAY,GAAG,IAAI,qCAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QAE1C,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,kBAAkB;IACnB,CAAC;IACD,eAAe;IACR,mCAAS,GAAhB;QACC,0CAA0C;QAC1C,+CAA+C;IAChD,CAAC;IAGO,yCAAe,GAAvB,UAAwB,SAAS;QAChC,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;QAC5C,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;QAC/B,OAAO,IAAI,CAAC;IACb,CAAC;IACM,gCAAM,GAAb,UAAc,EAAE;QACf,oBAAoB;QACpB,0BAA0B;QAC1B,kBAAkB;QAClB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACtB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAC3B,GAAG;IACJ,CAAC;IArFD;QADC,QAAQ,CAAC,yCAAmB,CAAC;4DACqB;IAEnD;QADC,QAAQ,CAAC,yCAAmB,CAAC;4DACqB;IAGnD;QADC,QAAQ,CAAC,qCAAiB,CAAC;0DACmB;IAE/C;QADC,QAAQ,CAAC,qCAAiB,CAAC;0DACmB;IAE/C;QADC,QAAQ,CAAC,qCAAiB,CAAC;0DACmB;IAG/C;QADC,QAAQ,CAAC,6BAAa,CAAC;sDACe;IAEvC;QADC,QAAQ,CAAC,6BAAa,CAAC;sDACe;IAEvC;QADC,QAAQ,CAAC,6BAAa,CAAC;sDACe;IAEvC;QADC,QAAQ,CAAC,6BAAa,CAAC;sDACe;IAGvC;QADC,QAAQ,CAAC,+CAAsB,CAAC;8DACuB;IAExD;QADC,QAAQ,CAAC,+BAAc,CAAC;sDACe;IAGxC;QADC,QAAQ,CAAC,uBAAU,CAAC;uDACgB;IAErC;QADC,QAAQ,CAAC,eAAM,CAAC;mDACY;IAE7B;QADC,QAAQ,CAAC,aAAK,CAAC;kDACW;IAE3B;QADC,QAAQ,CAAC,uBAAU,CAAC;uDACgB;IAlCzB,eAAe;QAD3B,OAAO;OACK,eAAe,CAwF3B;IAAD,sBAAC;CAxFD,AAwFC,CAxFoC,EAAE,CAAC,SAAS,GAwFhD;AAxFY,0CAAe","file":"","sourceRoot":"/","sourcesContent":["import { BackPackComponent } from \"../gamedata/BackPackComponent\";\r\nimport { ChoppingBlockComponent } from \"../gamedata/ChoppingBlockComponent\";\r\nimport { Environment } from \"../gamedata/Environment\";\r\nimport { ForgeComponent } from \"../gamedata/ForgeComponent\";\r\nimport { IronRockComponent } from \"../gamedata/IronRockComponent\";\r\nimport { Blacksmith } from \"../gamedata/labourers/Blacksmith\";\r\nimport { Logger } from \"../gamedata/labourers/Logger\";\r\nimport { Miner } from \"../gamedata/labourers/Miner\";\r\nimport { WoodCutter } from \"../gamedata/labourers/WoodCutter\";\r\nimport { SupplyPileComponent } from \"../gamedata/SupplyPileComponent\";\r\nimport { TreeComponent } from \"../gamedata/TreeComponent\";\r\nconst { ccclass, property } = cc._decorator;\r\n@ccclass\r\nexport class EnvironmentView extends cc.Component {\r\n\t@property(SupplyPileComponent)\r\n\tpublic supplyPileComp1: SupplyPileComponent = null;\r\n\t@property(SupplyPileComponent)\r\n\tpublic supplyPileComp2: SupplyPileComponent = null;\r\n\r\n\t@property(IronRockComponent)\r\n\tprivate ironRockComp1: IronRockComponent = null\r\n\t@property(IronRockComponent)\r\n\tprivate ironRockComp2: IronRockComponent = null\r\n\t@property(IronRockComponent)\r\n\tprivate ironRockComp3: IronRockComponent = null\r\n\r\n\t@property(TreeComponent)\r\n\tpublic treeComp1: TreeComponent = null;\r\n\t@property(TreeComponent)\r\n\tpublic treeComp2: TreeComponent = null;\r\n\t@property(TreeComponent)\r\n\tpublic treeComp3: TreeComponent = null;\r\n\t@property(TreeComponent)\r\n\tpublic treeComp4: TreeComponent = null;\r\n\r\n\t@property(ChoppingBlockComponent)\r\n\tpublic choppingBlockComp: ChoppingBlockComponent = null;\r\n\t@property(ForgeComponent)\r\n\tpublic forgeComp: ForgeComponent = null;\r\n\r\n\t@property(Blacksmith)\r\n\tpublic blackSmith: Blacksmith = null;\r\n\t@property(Logger)\r\n\tpublic logger: Logger = null;\r\n\t@property(Miner)\r\n\tpublic miner: Miner = null;\r\n\t@property(WoodCutter)\r\n\tpublic woodCutter: WoodCutter = null;\r\n\r\n\tcurTime = 0\r\n\tstart() {\r\n\t\tthis.initEnvironment();\r\n\t}\r\n\r\n\tprivate initEnvironment() {\r\n\t\tEnvironment.supplyPileComps = [this.supplyPileComp1, this.supplyPileComp2];\r\n\t\tEnvironment.rockComps = [this.ironRockComp1, this.ironRockComp2, this.ironRockComp3];\r\n\t\tEnvironment.treeComps = [this.treeComp1, this.treeComp2, this.treeComp3, this.treeComp4];\r\n\r\n\t\tEnvironment.forgeComps = [this.forgeComp];\r\n\t\tEnvironment.choppingBlockComps = [this.choppingBlockComp];\r\n\r\n\r\n\t\t// 设置backpack\r\n\t\tlet smithBP = new BackPackComponent(0, 0, 0);\r\n\t\tthis.blackSmith.setBackPack(smithBP);\r\n\r\n\t\tlet loggerBP = new BackPackComponent(0, 0, 0);\r\n\t\tthis.logger.setBackPack(loggerBP);\r\n\r\n\t\tlet minerBP = new BackPackComponent(0, 0, 0);\r\n\t\tthis.miner.setBackPack(minerBP);\r\n\r\n\t\tlet woodCutterBP = new BackPackComponent(0, 0, 0);\r\n\t\tthis.woodCutter.setBackPack(woodCutterBP);\r\n\r\n\t\tthis.startTick();\r\n\t\t// this.update(3);\r\n\t}\r\n\t/**开始游戏stick */\r\n\tpublic startTick() {\r\n\t\t//this.lastTimeStamp = TimeUtil.getTime();\r\n\t\t//\tegret.startTick(this.updateTimeStamp, this);\r\n\t}\r\n\r\n\tprivate lastTimeStamp: number;\r\n\tprivate updateTimeStamp(timeStamp): boolean {\r\n\t\tthis.update(timeStamp - this.lastTimeStamp);\r\n\t\tthis.lastTimeStamp = timeStamp;\r\n\t\treturn true;\r\n\t}\r\n\tpublic update(dt) {\r\n\t\t//this.curTime -= dt\r\n\t\t//if (this.curTime <= 0) {\r\n\t\t//this.curTime = 1\r\n\t\tthis.miner.update(dt);\r\n\t\tthis.blackSmith.update(dt);\r\n\t\tthis.logger.update(dt);\r\n\t\tthis.woodCutter.update(dt);\r\n\t\t//}\r\n\t}\r\n}"]}