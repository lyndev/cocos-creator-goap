{"version":3,"sources":["assets\\src\\app\\ai\\fsm\\state\\StateMove.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAGA,yCAAwC;AACxC,yCAAwC;AAExC;IAA+B,6BAAS;IAAxC;;IAqBA,CAAC;IAnBG;;;OAGG;IACI,4BAAQ,GAAf,UAAgB,KAAa;QACzB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAkB,CAAA;QACnC,IAAI,IAAI,GAAU,KAAK,CAAC,OAAO,EAAE,CAAC;QAClC,IAAI,MAAM,GAAe,IAAI,CAAC,KAAK,CAAC,kBAAkB,EAAE,CAAC;QACzD,IAAI,MAAM,CAAC,eAAe,EAAE,IAAI,MAAM,CAAC,MAAM,IAAI,IAAI,EAAE;YACnD,OAAO,CAAC,GAAG,CAAC,iJAAiJ,CAAC,CAAC;YAC/J,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAS,CAAC,SAAS,CAAC,CAAC;YAC5C,OAAO;SACV;QAED,+BAA+B;QAC/B,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,EAAE;YAC/B,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,qBAAS,CAAC,kBAAkB,CAAC,CAAC;SACxD;IACL,CAAC;IACL,gBAAC;AAAD,CArBA,AAqBC,CArB8B,qBAAS,GAqBvC;AArBY,8BAAS","file":"","sourceRoot":"/","sourcesContent":["import { GoapAction } from \"../../goap/GoapAction\";\r\nimport { GoapAgent } from \"../../goap/GoapAgent\";\r\nimport { IGoap } from \"../../goap/IGoap\";\r\nimport { StateBase } from \"./StateBase\";\r\nimport { StateEnum } from \"./StateEnum\";\r\n\r\nexport class StateMove extends StateBase {\r\n    protected _owner: GoapAgent\r\n    /**\r\n     * 状态更新 \r\n     * @return \r\n     */\r\n    public onUpdate(delta: number): void {\r\n        let owner = this.owner as GoapAgent\r\n        let goap: IGoap = owner.getGoap();\r\n        let action: GoapAction = this.owner.peekCurrentActions();\r\n        if (action.requiresInRange() && action.target == null) {\r\n            console.log(\"Fatal error: Action requires a target but has none. Planning failed. You did not assign the target in your Action.checkProceduralPrecondition()\");\r\n            this.owner.changeState(StateEnum.StateIdle);\r\n            return;\r\n        }\r\n\r\n        // get the agent to move itself\r\n        if (goap.moveAgent(action, delta)) {\r\n            this.owner.changeState(StateEnum.StatePerformAction);\r\n        }\r\n    }\r\n}"]}